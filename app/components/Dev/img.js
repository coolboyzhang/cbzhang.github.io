import React from 'react';
import AH from '../../utils/arrayHelper';
import Qn from '../../utils/qiniu';
import Storage from '../../utils/Storage';

let files = ["http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/42cdad5940e4b43a801a3b9cef4c857e.gif","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/3467c541407f73eb8026128d3b702d4d.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/a6f3531e40c9dffb80c09aeac6fd44a2.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/609a3a4040a3e874809c4864a2fe71e9.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/1d7da6c440f10de080bc5e72addf4d62.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/fadf57344052119180de5051fc3234cb.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/07/eff6f149408817bb80708d50fd4bd33f.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/06/7efb4d7c40bd93a5809d897e93dd5761.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/05/06/6a96a8fa401607f3805093ef65339346.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/03/27/89f36aa5407f77f480e37a640240f51e.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/03/27/8439505c409ec6ef806bf35516be904e.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/03/18/e5132f9b4086b4b180e363c0784d0614.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/03/15/56ae37da404a12628036b2a332516567.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/22/09c84a5840cd995880c2505920574554.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/14/baf60dad40acc073802347ab7d3688d6.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/12/73bc45fc400f829a80474b922f26a853.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/2a5f35df40a32c1980b0acd06cc11463.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/c126c64d4034400a8003072611d7083f.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/73ded0d340de52ff80b9be86d7218d12.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/885526ee40cc9be8809fb46504491c84.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/dda946f140b66aa88079681dd105eb00.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/3e2f1a33407ce5f5804996ee95959a84.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/875e01eb406a21938036eec2e8d95aa8.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/16c1e132407e5a628079008e220f5337.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/06e02e97400f576680b08c62be318a73.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/d8a1524640783d8a80187d7a69579b39.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/efccea13408fc77380a0ebea477008ba.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/d7c271fd40ec116c806d47f5d0cbb001.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/7d4fa3214030984c80fee445e4296ff5.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/10/738d0ccb4048457e80dde9e0b2539f2c.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/b6ccc50440af1bd980cded6aeb1a3b60.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/91596591402ada3980e4f78f6ace5e93.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/854bae7140cdcebc804dfa456c21b33e.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/421ce98640f923e580e93ea9e769892b.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/dfa025e6408a840080edb6714a332861.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/350ec93040006de980cb7198cbba3fb1.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/9d983bfa40a7f0ee80158fb2c7e349eb.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/a6a22f6140ce414a800c663ce445dc38.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/bb7f5cf840d8a92180be5737fd370643.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/5df0566a40559c9f80f199b103e051b6.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/58f62e0e40236f2180b226a0b8d1c9a4.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/0ba243894089a460801a267e813abc0a.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/8c6fb7d74089f78880776abd7abebdc5.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/323f90f840fb617b8057c3c95483b734.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/91cef5824076b07f8029ca329a1f97a2.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/09/311bf3664054ce0580e13e7bbff663b8.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/6619e195403f1921808c050002055eb8.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/3b57ccd1404992a0803b477c19966f92.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/23f9754e40d9c80e80087217a14cc836.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/e123db3a407afbab80feb2976a83e3c1.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/7dc5878c40c0061f809b70f79855acd4.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/1a3ed50c40e4997680c94897bc7b8872.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/e9a6d5df4062d8ce80a14ecad9dde583.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/08/a97900e640958d86801f0efd1ca67712.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/36c43d16408c2b9080d3a05e167f1c79.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/3ec8e31e404cccdb80860a5ce98b7982.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/70ef1c8840fe29388065370c6bef3f66.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/c76c64fb40457f9d80557121beb8265f.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/72c0db7540667c9d803464de77617a3c.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/5978e0b640a4e9b680ed56eee095a64f.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/51024e9940cd475880c4437f0a1c1be9.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/1757fde040ead25380d02b3e8bf3ac8c.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/f12fb7e4407b3e54806c3339d001ecb7.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/361de387408ba59180719959bb312624.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/11db87ac40a5e321808ce49b4c441bab.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/5d68cd4140c5d3e080c21779d0a1d429.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/07/8dd8b8c9409fc1e880554b903164ff13.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/06/bc0307554041519180fd8061b765d439.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/06/c7c13871404a5124809c127d7077e6db.png","http://bmob-cdn-20716.b0.upaiyun.com/2019/02/02/91cc64924056e8f980633f84178784f4.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/997c2bf5404e5abc809b42fe6bb902f9.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/a516340a402e93ea8025fe0eb6f2f080.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/b2caae93401a9be1809edfb314a91159.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/33f80e334020a90b80e8cd8423cb8fbe.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/d2e31f7c40113bdd807256c5a4cb06ae.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/466bf6bb400574cf805fdb2fd715caa1.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/29/4053f8ab4029141e8080120bdf051a90.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/03/3c68b16e4011ac568004ad00b7354035.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/03/629fa7b3400b966d80032421517ba7b1.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/10/03/cacb5be9406ba2df8083c8d2241a1d73.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/12/be69fc3b407673bb8023f3574ecebb7a.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/12/3fb3cf804049529e80b764992e34a878.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/77d1c3e5403bbd3980e6a618b4e3dfdc.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/86cb766a403d73a880a52071b878c13e.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/3b61a48340c2925280840b9a0f595799.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/1b937a7e4080d4e28049515494fa2f85.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/8145ea8040f9be5c806e022df0874ccd.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/d234064b4082f36180782aa0a4cbffed.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/10/9f89eef240a64dc9800bee5ea32cadfa.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/04/17bbfcfd400bd6ab80d1334f1d2c797e.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/04/620e218c40dda73e80c9a9d62e269a0d.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/04/6542a8ef407ad319806bba5fdbef012e.png","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/bdd16258408b48b5800b914c776b23a5.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/8c7fb65940bb83aa809e21203cccde90.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/c654511b40beafcc804987dfc0585688.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/8046c625408e6b2480638d5b12fe81d2.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/e4f52a6e40dc970080ad40fc169d0835.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/8da98aaa403a7e3480037a0f0c470dcd.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/04d118a1405fb842803f90e4bd76e315.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/e4f4a8b340d74b1880bd14e44461a5cc.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/39c0dbdc40e9ab1180cfd7496deceb47.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/7fa081ef40de72f480977b4e66b514ea.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/0fff5a5840f11fba80e04994b1a3818e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/b887c7a640ea6ea1801e9d14f022d029.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/91e4673d40954dd380d40f6f1daa8ce6.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/79a6680b403d13b980684da0f8ab1f21.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/5d0c83be402a24a78040e39be9812ce8.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/3db0116b405016a1802bed989412c9ae.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/8382f2074059f52d80a81ab3b9a968c4.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/30acaeda40318fb4800f37dcb966e4ce.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/fa5817e740fce9d480f599093d3d97b4.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/23755286408da48380aa0283134d9b84.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/b5cfabbb40999384805adc38ebb3e80b.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/575b9faa406cbaaa80357c929c6a0066.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/af0ff72f40cfa9dc80c9e295f660de71.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/c81eac2540646491801990b98ea96e68.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/1f06eb634035cc29801a6f1a07868d5d.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/a0e85bcf407ac3d8804ec5fa8ada30fc.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/a3c3d5544036618380c56c28a1835aa1.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/ddb9177140dbd47380fdbd262be3c1e2.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/a7458be040ed7287807bffdaed6a2796.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/1ecb383840cd080480ec34c02da67a74.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/0deeabdc405bd3268085a5b92412ca02.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/1edb36b740d390f380f5811381806a88.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/aed9649740514e1f80a8ce759f9b4377.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/7091c303403191ea80de4f7d17af4a22.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/0103782d4003363c803afcd4292d5687.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/30b9c1084041e34780c2d87729c6cb13.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/073c187f4078dc2d80a756abe2c9ec16.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/09/03/130148454082955b8081818bd001d281.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/3938bc7e403439fb800e7bbaa7389977.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/7284947a40e3bd1680f8fcd862965724.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/f87f7d414065ad2b80b1bf5681a668db.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/6326c2f240fd482380c57a534031629e.jpg","http://bmob-cdn-20716.b0.upaiyun.com/2018/08/12/36bd466640dd4aa0802db47012cb0c69.jpg"];
files = AH.delDuplicate(files);
function getImgToBase64(url,callback){ //将图片转换为Base64
  var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d'),
    img = new Image;
  img.crossOrigin = 'Anonymous';
  img.onload = function(){
    canvas.height = img.height;
    canvas.width = img.width;
    ctx.drawImage(img,0,0);
    var dataURL = canvas.toDataURL('image/png');
    callback(dataURL);
    canvas = null;
  };
  img.src = url;
}


function dataURLtoFile(dataurl, filename) { //将base64转换为文件
  var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
    bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
  while(n--){
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new File([u8arr], filename, {type:mime});
}

var obj = {};

function imgToFile(url) {
  getImgToBase64(url,function(data){
    var myFile = dataURLtoFile(data, url.replace('http://', ''));
    Qn(myFile).subscribe(
      () => {},
      (e) => console.log(e, 'err', url),
      (e) => {
        obj[url] = `http://static.jsososo.com/${e.key}`;
        Storage.set('iiiibmob', obj, true);
      }
    );
  });
}
class ImgTrans extends React.Component {

  render() {

    imgToFile(files[2]);
    imgToFile(files[3]);

    return (
      <div>
        hello world
      </div>
    );
  }
}

export default ImgTrans;
