webpackJsonp([11],{"./app/containers/MileStone/index.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments[1];switch(t.type){case S:return e;case w:return e.set("list",Object(h.fromJS)(t.data));default:return e}}function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},x,this)}function r(e){return{data:e,type:w}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return{queryMileStone:function(t){return e(r(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/react/index.js"),d=n.n(u),p=(n("./node_modules/prop-types/index.js"),n("./node_modules/react-redux/es/index.js")),f=n("./node_modules/react-helmet/lib/Helmet.js"),m=n("./node_modules/reselect/es/index.js"),b=n("./node_modules/redux/es/index.js"),j=n("./app/utils/injectSaga.js"),v=n("./app/utils/injectReducer.js"),y=function(e){return e.get("mileStone")},O=function(){return Object(m.a)(y,function(e){return e.toJS()})},_=O,h=n("./node_modules/immutable/dist/immutable.js"),g=n("./app/utils/Storage.js"),S="app/MileStone/DEFAULT_ACTION",w="app/MileStone/QUERY_MILE_STONE_LIST",M=Object(h.fromJS)({list:{}}),k=o,x=regeneratorRuntime.mark(i),N=n("./app/containers/App/selectors.js"),T=n("./node_modules/antd/lib/index.js"),Y=n("./app/utils/timer.js"),E=n("./app/utils/stringHelper.js"),D=n("./app/utils/recentlyUsed.js"),A=n("./app/containers/App/index.js");n.d(t,"MileStone",function(){return J});var I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,i){var r=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&r)for(var a in r)void 0===n[a]&&(n[a]=r[a]);else n||(n=r||{});if(1===s)n.children=i;else if(s>1){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),q=I(f.Helmet,{},void 0,I("title",{},void 0,"里程碑"),I("meta",{name:"jsososo",content:"里程碑"})),R=I("b",{className:"pl_20"},void 0,"Now"),J=function(e){function t(){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),P(t,[{key:"componentDidMount",value:function(){Object(A.a)("里程碑")&&(D.a.set("里程碑","kit",this.props.user.username),this.getAllMileStone())}},{key:"getAllMileStone",value:function(){var e=this;g.a.queryBmob("Thing",function(t){return t.equalTo("user",e.props.user.username||"游客"),t.equalTo("milestone",!0),t.limit(1e3),t},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.push({id:"today",time:Object(Y.a)().time}),t.sort(function(e,t){return e.time-t.time});var n={};t.forEach(function(e){var t=Object(Y.a)(e.time).str();n[t]?n[t].push(e):n[t]=[e]}),e.props.queryMileStone(n),e.pageScroll()},function(){T.message.error("找不到呀")},"find")}},{key:"pageScroll",value:function(){var e=Object(E.b)("id"),t=document.getElementById("milestone-"+e),n=t.parentNode.parentNode;t&&window.scrollTo(0,t.offsetTop+n.offsetTop-100)}},{key:"render",value:function(){var e=this.props.milestone;return I("div",{},void 0,q,I("div",{},void 0,I(T.Timeline,{},void 0,Object.keys(e.list).sort(function(e,t){return Object(Y.a)(e,"YYYY-MM-DD").time-Object(Y.a)(t,"YYYY-MM-DD").time}).map(function(t){return I(T.Timeline.Item,{id:"milestone-date-"+t,color:Object(Y.a)().time<Object(Y.a)(t,"YYYY-MM-DD").time?"#999":"blue"},"milestone-date-"+t,e.list[t].map(function(e,t){return"today"===e.id?I("div",{className:"fc_blue ft_18 mb_10",id:"milestone-today"},"now",I("b",{style:{width:"150px"},className:"inline-block"},void 0,0===t&&Object(Y.a)(e.time).str()),R):I("div",{className:"mb_15",id:"milestone-"+e.objectId},"milestone-thing-"+e.objectId,I("div",{},void 0,I("b",{style:{width:"150px"},className:"ft_18 inline-block "+(e.time>Object(Y.a)().time?"fc_999":"fc_blue")},void 0,0===t&&Object(Y.a)(e.time).str()),I("a",{className:"mile-stone-link",href:"#/kit/calendar/?date="+Object(Y.a)(e.time).str()+"&id="+e.id},void 0,I("span",{className:"pl_20 ft_16",style:{fontWeight:"900"}},void 0,e.title||"还没起名字"),I("span",{className:"pl_20"},void 0,Object(Y.a)().to(Object(Y.a)(e.time),"str",2)))),I("div",{className:"fc_999",style:{paddingLeft:"170px"}},void 0,e.content))}))}))))}}]),t}(d.a.PureComponent),L=Object(m.b)({milestone:_(),user:Object(N.b)()}),C=Object(p.b)(L,c),H=Object(v.a)({key:"mileStone",reducer:k}),U=Object(j.a)({key:"mileStone",saga:i});t.default=Object(b.c)(H,U,C)(J)}});